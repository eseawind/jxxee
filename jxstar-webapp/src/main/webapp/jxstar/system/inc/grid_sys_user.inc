	config.initpage = function(gridNode){		var event = gridNode.event;		event.on('beforecreate', function(event) {			var page = event.grid;			var deptTree = Ext.getCmp('tree_sys_user');						var selNode = deptTree.selModel.selNode;			if (selNode == null) return;			var deptId = selNode.id;			var deptName = selNode.text;			var record = page.getStore().getAt(0);						record.set('sys_user__dept_id', deptId);			record.set('sys_dept__dept_name', deptName);		});	};		config.eventcfg = {				clearSql: function(seluserid) {			var params = 'keyid=' + seluserid + '&funid=sys_user';			params += '&pagetype=grid&eventcode=clearsql';			//发送请求，清除数据权限SQL缓存			Request.postRequest(params, null);		},

		setRole: function(){
			var records = this.grid.getSelectionModel().getSelections();
			if (!JxUtil.selectone(records)) return;
			var pkcol = this.define.pkcol;			var seluserid = records[0].get(pkcol);						//过滤条件			var where_sql = 'sys_user_role.user_id = ?';			var where_type = 'string';			var where_value = seluserid;						//加载数据			var hdcall = function(grid) {				//显示数据				JxUtil.delay(500, function(){					//设置外键值					grid.fkValue = where_value;					Jxstar.loadData(grid, {where_sql:where_sql, where_value:where_value, where_type:where_type});				});			};			var srcDefine = Jxstar.findNode('sys_user_role');			//显示数据			Jxstar.showData({				filename: srcDefine.gridpage,				title: srcDefine.nodetitle, 				pagetype: 'subgrid',				nodedefine: srcDefine,				callback: hdcall			});
		},				setData: function(){			var records = this.grid.getSelectionModel().getSelections();			if (!JxUtil.selectone(records)) return;			var pkcol = this.define.pkcol;			var seluserid = records[0].get(pkcol);						//过滤条件			var where_sql = 'sys_user_data.user_id = ?';			var where_type = 'string';			var where_value = seluserid;						//加载数据			var hdcall = function(grid) {				//显示数据				JxUtil.delay(500, function(){					//设置外键值					grid.fkValue = where_value;					Jxstar.loadData(grid, {where_sql:where_sql, where_value:where_value, where_type:where_type});				});			};			var srcDefine = Jxstar.findNode('sys_user_data');			//显示数据			Jxstar.showData({				filename: srcDefine.gridpage,				title: srcDefine.nodetitle, 				pagetype: 'subgrid',				nodedefine: srcDefine,				callback: hdcall			});						//清除数据权限SQL缓存			this.clearSql(seluserid);		},				setDatax: function(){			var records = this.grid.getSelectionModel().getSelections();			if (!JxUtil.selectone(records)) return;			var pkcol = this.define.pkcol;			var seluserid = records[0].get(pkcol);						//过滤条件			var where_sql = 'sys_user_funx.user_id = ?';			var where_type = 'string';			var where_value = seluserid;						//加载数据			var hdcall = function(grid) {				//显示数据				JxUtil.delay(500, function(){					//处理树形页面的情况					if (!grid.isXType('grid')) {						grid = grid.getComponent(1).getComponent(0);					}					//设置外键值					grid.fkValue = where_value;					Jxstar.loadData(grid, {where_sql:where_sql, where_value:where_value, where_type:where_type});				});			};			var srcDefine = Jxstar.findNode('sys_user_funx');			//显示数据			Jxstar.showData({				filename: srcDefine.layout,				title: srcDefine.nodetitle, 				pagetype: 'subgrid',				nodedefine: srcDefine,				callback: hdcall			});						//清除数据权限SQL缓存			this.clearSql(seluserid);		},		setPass : function() {				var records = this.grid.getSelectionModel().getSelections();			if (!JxUtil.selectone(records)) return;						var pkcol = this.define.pkcol;			var userId = records[0].get(pkcol);			JxUtil.setPass(userId);		},				defPass : function() {				var records = this.grid.getSelectionModel().getSelections();			if (!JxUtil.selectone(records)) return;			var pkcol = this.define.pkcol;			var hdcall = function() {				var params = 'keyid=' + records[0].get(pkcol);				params += '&funid=sys_user';				//设置请求的参数				params += '&pagetype=editgrid&eventcode=defpass';				//发送请求				Request.postRequest(params, null);			};			//'确定执行当前操作吗？'			Ext.Msg.confirm(jx.base.hint, jx.event.doyes, function(btn) {				if (btn == 'yes') hdcall();			});		}
	};	